STMicroelectronics list file postprocessor v1.01   (C)2009-2024   Thu May 09 17:51:15 2024
Page 1  Assembler
                                               c:\users\simeo\qsync\university\computer architectures\lab3_examp_prep\ex3.asm

   1                         stm8/     
   2                         
   0  000000                                 #include "mapping.inc"
   1                                                          ;-------------------------------
                                                                ;-----------------------
   2                                                          ; SEGMENT MAPPING FILE 
                                                                ;AUTOMATICALLY GENERATED BY 
                                                                ;STVD
   3                                                          ; SHOULD NOT BE MANUALLY 
                                                                ;MODIFIED.
   4                                                          ; CHANGES WILL BE LOST WHEN FILE
                                                                ; IS REGENERATED.
   5                                                          ;-------------------------------
                                                                ;-----------------------
   6  000000                                 #define  RAM0 1
   7  000000                                 #define  ram0_segment_start 0
   8  000000                                 #define  ram0_segment_end FF
   9  000000                                 #define  RAM1 1
  10  000000                                 #define  ram1_segment_start 100
  11  000000                                 #define  ram1_segment_end 5FF
  12  000000                                 #define  stack_segment_start 600
  13  000000                                 #define  stack_segment_end 7FF
<END_OF_INCLUSION>
   4                         
   5                                   segment  'ram0'
   6  000000                       array1    ds.b     16
   7  000010                       index     ds.w     
   8                         
   9                                   segment  'rom'
  10  008080   08                  ARRAY_COUNT  DC.B     8
  11                         main.l    
  12                                                          ; initialize SP
  13  008081   AE07FF                        ldw      X,#stack_end
  14  008084   94                            ldw      SP,X
  15                         
  16  008085                                 #ifdef   1             
  17                                                          ; clear RAM0
  18  000000                       ram0_start.b  EQU      $0
  19  0000FF                       ram0_end.b  EQU      $FF
  20  008085   AE0000                        ldw      X,#ram0_start
  21                         clear_ram0.l  
  22  008088   7F                            clr      (X)
  23  008089   5C                            incw     X
  24  00808A   A300FF                        cpw      X,#ram0_end   
  25  00808D   23F9                          jrule    clear_ram0
  26  00808F                                 #endif   
  27                         
  28  00808F                                 #ifdef   1
  29                                                          ; clear RAM1
  30  000100                       ram1_start.w  EQU      $100
  31  0005FF                       ram1_end.w  EQU      $5FF          
  32  00808F   AE0100                        ldw      X,#ram1_start
  33                         clear_ram1.l  
  34  008092   7F                            clr      (X)
  35  008093   5C                            incw     X
  36  008094   A305FF                        cpw      X,#ram1_end   
  37  008097   23F9                          jrule    clear_ram1
  38  008099                                 #endif   
STMicroelectronics list file postprocessor v1.01   (C)2009-2024   Thu May 09 17:51:15 2024
Page 2  Assembler
                                               c:\users\simeo\qsync\university\computer architectures\lab3_examp_prep\ex3.asm

  39                         
  40                                                          ; clear stack
  41  000600                       stack_start.w  EQU      $600
  42  0007FF                       stack_end.w  EQU      $7FF
  43  008099   AE0600                        ldw      X,#stack_start
  44                         clear_stack.l  
  45  00809C   7F                            clr      (X)
  46  00809D   5C                            incw     X
  47  00809E   A307FF                        cpw      X,#stack_end  
  48  0080A1   23F9                          jrule    clear_stack
  49                         
  50                         
  51                         
  52                         infinite_loop.l  
  53  0080A3   90AE0001                      ldw      Y, #1
  54  0080A7   CD80AD                        call     fill_array
  55                         done      
  56  0080AA   CC80AA                        jp       done
  57                         fill_array  
  58  0080AD   909F                          ld       a, yl
  59  0080AF   CE0010                        ldw      X, index
  60  0080B2   D70000                        ld       (array1,X), A
  61  0080B5   9058                          sllw     Y
  62  0080B7   CE0010                        ldw      x, index
  63  0080BA   5C                            incw     x
  64  0080BB   CF0010                        ldw      index, x
  65  0080BE   9F                            ld       a, xl
  66  0080BF   C18080                        cp       a, ARRAY_COUNT
  67  0080C2   26E9                          jrne     fill_array
  68  0080C4   81                            ret      
  69                         
  70  0080C5                                 interrupt NonHandledInterrupt
  71                         NonHandledInterrupt.l  
  72  0080C5   80                            iret     
  73                         
  74                                   segment  'vectit'
  75  008000   82008081                      dc.l     {$82000000+main}  ; reset
  76  008004   820080C5                      dc.l     {$82000000+NonHandledInterrupt}  ; trap
  77  008008   820080C5                      dc.l     {$82000000+NonHandledInterrupt}  ; irq0
  78  00800C   820080C5                      dc.l     {$82000000+NonHandledInterrupt}  ; irq1
  79  008010   820080C5                      dc.l     {$82000000+NonHandledInterrupt}  ; irq2
  80  008014   820080C5                      dc.l     {$82000000+NonHandledInterrupt}  ; irq3
  81  008018   820080C5                      dc.l     {$82000000+NonHandledInterrupt}  ; irq4
  82  00801C   820080C5                      dc.l     {$82000000+NonHandledInterrupt}  ; irq5
  83  008020   820080C5                      dc.l     {$82000000+NonHandledInterrupt}  ; irq6
  84  008024   820080C5                      dc.l     {$82000000+NonHandledInterrupt}  ; irq7
  85  008028   820080C5                      dc.l     {$82000000+NonHandledInterrupt}  ; irq8
  86  00802C   820080C5                      dc.l     {$82000000+NonHandledInterrupt}  ; irq9
  87  008030   820080C5                      dc.l     {$82000000+NonHandledInterrupt}  ; irq10
  88  008034   820080C5                      dc.l     {$82000000+NonHandledInterrupt}  ; irq11
  89  008038   820080C5                      dc.l     {$82000000+NonHandledInterrupt}  ; irq12
  90  00803C   820080C5                      dc.l     {$82000000+NonHandledInterrupt}  ; irq13
  91  008040   820080C5                      dc.l     {$82000000+NonHandledInterrupt}  ; irq14
  92  008044   820080C5                      dc.l     {$82000000+NonHandledInterrupt}  ; irq15
  93  008048   820080C5                      dc.l     {$82000000+NonHandledInterrupt}  ; irq16
  94  00804C   820080C5                      dc.l     {$82000000+NonHandledInterrupt}  ; irq17
  95  008050   820080C5                      dc.l     {$82000000+NonHandledInterrupt}  ; irq18
STMicroelectronics list file postprocessor v1.01   (C)2009-2024   Thu May 09 17:51:15 2024
Page 3  Assembler
                                               c:\users\simeo\qsync\university\computer architectures\lab3_examp_prep\ex3.asm

  96  008054   820080C5                      dc.l     {$82000000+NonHandledInterrupt}  ; irq19
  97  008058   820080C5                      dc.l     {$82000000+NonHandledInterrupt}  ; irq20
  98  00805C   820080C5                      dc.l     {$82000000+NonHandledInterrupt}  ; irq21
  99  008060   820080C5                      dc.l     {$82000000+NonHandledInterrupt}  ; irq22
 100  008064   820080C5                      dc.l     {$82000000+NonHandledInterrupt}  ; irq23
 101  008068   820080C5                      dc.l     {$82000000+NonHandledInterrupt}  ; irq24
 102  00806C   820080C5                      dc.l     {$82000000+NonHandledInterrupt}  ; irq25
 103  008070   820080C5                      dc.l     {$82000000+NonHandledInterrupt}  ; irq26
 104  008074   820080C5                      dc.l     {$82000000+NonHandledInterrupt}  ; irq27
 105  008078   820080C5                      dc.l     {$82000000+NonHandledInterrupt}  ; irq28
 106  00807C   820080C5                      dc.l     {$82000000+NonHandledInterrupt}  ; irq29
 107                         
 108  008080                                 end      
STMicroelectronics list file postprocessor v1.01   (C)2009-2024   Thu May 09 17:51:15 2024
Page 4  Assembler
                                               c:\users\simeo\qsync\university\computer architectures\lab3_examp_prep\ex3.asm

Symbol Name                       Value     Call       Type  Scope      Rel.  Line  Privacy  Segment   Size  Bytes File

ARRAY_COUNT                           8080         no  WORD  Internal   ABS     10  private  textdata     1     1  -

NonHandledInterrupt               000080C5  interrupt  LONG  Internal   ABS     71  private  textdata     1     0  -

array1                                0000         no  WORD  Internal   ABS      6  private  bss         16     1  -

clear_ram0                        00008088         no  LONG  Internal   ABS     21  private  textdata    10     0  -
clear_ram1                        00008092         no  LONG  Internal   ABS     33  private  textdata    10     0  -
clear_stack                       0000809C         no  LONG  Internal   ABS     44  private  textdata     7     0  -

done                                  80AA         no  WORD  Internal   ABS     55  private  textdata     3     0  -

fill_array                            80AD         no  WORD  Internal   ABS     57  private  textdata    24     0  -

index                                 0010         no  WORD  Internal   ABS      7  private  bss          2     2  -
infinite_loop                     000080A3         no  LONG  Internal   ABS     52  private  textdata     7     0  -

main                              00008081         no  LONG  Internal   ABS     11  private  textdata     7     0  -

ram0_start                              00         no  BYTE  Internal   ABS     18  private  textdata     0     0  -
ram0_end                                FF         no  BYTE  Internal   ABS     19  private  textdata     0     0  -
ram1_start                            0100         no  WORD  Internal   ABS     30  private  textdata     0     0  -
ram1_end                              05FF         no  WORD  Internal   ABS     31  private  textdata     0     0  -

stack_start                           0600         no  WORD  Internal   ABS     41  private  textdata     0     0  -
stack_end                             07FF         no  WORD  Internal   ABS     42  private  textdata     0     0  -


17 labels
No errors on assembly of 'c:\users\simeo\qsync\university\computer architectures\lab3_examp_prep\ex3.asm'